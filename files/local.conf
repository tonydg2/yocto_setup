# Machine Selection
#MACHINE ?= "myhardware-u96v2-zynqmp"
#MACHINE ?= "myhardware-zc702-zynq"

# This sets the default machine if no other machine is selected:
MACHINE ??= "zynqmp-generic"
#MACHINE ??= "zynq-generic"

IMAGE_FSTYPES:append=" wic"

#DISTRO ?= "poky"
DISTRO ?= "petalinux"

PACKAGE_CLASSES ?= "package_rpm"

# adg - this gave root access (su, no password)
#EXTRA_IMAGE_FEATURES ?= "debug-tweaks"

##EXTRA_IMAGE_FEATURES ?= " \
##  empty-root-password \
##  serial-autologin-root \
##  "


USER_CLASSES ?= "buildstats"

# Create license (-lic) packages
LICENSE_CREATE_PACKAGE = "1"
COPY_LIC_MANIFEST = "1"

# URI's to check for connectivity from the sanity.bbclass
CONNECTIVITY_CHECK_URIS ?= ""

# Should mirror tarballs be generated during the do_fetch stage?
BB_GENERATE_MIRROR_TARBALLS ?= "1"

PATCHRESOLVE = "noop"

BB_DISKMON_DIRS ??= "\
    STOPTASKS,${TMPDIR},1G,100K \
    STOPTASKS,${DL_DIR},1G,100K \
    STOPTASKS,${SSTATE_DIR},1G,100K \
    STOPTASKS,/tmp,100M,100K \
    HALT,${TMPDIR},100M,1K \
    HALT,${DL_DIR},100M,1K \
    HALT,${SSTATE_DIR},100M,1K \
    HALT,/tmp,10M,1K"


PACKAGECONFIG:append:pn-qemu-system-native = " sdl"
BB_HASHSERVE = ""
BB_SIGNATURE_HANDLER = "OEBasicHash"
PRSERV_HOST = "localhost:0"

LICENSE_FLAGS_ACCEPTED = " \
        commercial_${MLPREFIX}ffmpeg \
        commercial_${MLPREFIX}x264 \
        commercial_${MLPREFIX}gstreamer1.0-omx \
        commercial_${MLPREFIX}libomxil \
        commercial_${MLPREFIX}sox \
        commercial_${MLPREFIX}faac \
        commercial_${MLPREFIX}faad2 \
        xilinx "

CONF_VERSION = "2"

INHERIT += "extrausers"
PASSWD = "\$5\$xJgcbxWNCFPGGiGP\$mO2ziTUzUdnkLoOflOtKt6KOf6aBovJ62k6V0G8tPu5"
EXTRA_USERS_PARAMS = "\
  useradd -p '${PASSWD}' adg; \
  usermod -p '${PASSWD}' root; \
"
#adg21:
#   \$5\$xJgcbxWNCFPGGiGP\$mO2ziTUzUdnkLoOflOtKt6KOf6aBovJ62k6V0G8tPu5



#IMAGE_INSTALL:remove:hw-u96 = "\
#        openamp-fw-echo-testd \
#        openamp-fw-mat-muld \
#        openamp-fw-rpc-demo \
#        packagegroup-petalinux-openamp \
#        packagegroup-petalinux-benchmarks \
#"


#--------------------------------------------------------------------------------------------------

#PACKAGE_EXCLUDE
#PACKAGE_INSTALL

#--------------------------------------------------------------------------------------------------
#packagegroup-core-boot
#mtd-utils
#kernel-modules
#linux-xlnx-udev-rules
#fpga-manager-script
#htop
#u-boot-tools
#hellopm 
#packagegroup-base-extended
#coreutils
#e2fsprogs
#e2fsprogs-badblocks
#e2fsprogs-e2fsck
#e2fsprogs-resize2fs
#lmsensors-sensorsdetect
#packagegroup-petalinux-lmsensors



#IMAGE_INSTALL:remove:hw-u96 = " \
#tcf-agent \
#bridge-utils \
#can-utils \
#pciutils \
#nfs-utils \
#nfs-utils-client \
#iperf3 \
#meson \
#libdfx \
#bc \
#bonnie++ \
#cmake \
#dnf \
#ethtool \
#gpio-utils \
#hdparm \
#i2c-tools \
#i2c-tools-misc \
#json-c \
#libpython3 \
#mesa-megadriver \
#nano \
#opencl-clhpp-dev \
#opencl-headers-dev \
#openssh \
#openssh-scp \
#openssh-sftp-server \
#openssh-sshd \
#packagegroup-petalinux-display-debug \
#packagegroup-petalinux-gstreamer \
#packagegroup-petalinux-matchbox \
#packagegroup-petalinux-opencv \
#packagegroup-petalinux-opencv-dev \
#packagegroup-petalinux-python-modules \
#packagegroup-petalinux-self-hosted \
#packagegroup-petalinux-v4lutils \
#packagegroup-petalinux-x11 \
#parted \
#pmic-prog \
#python3 \
#python3-pip \
#python3-pyserial \
#usbutils \
#util-linux util-linux-blkid \
#util-linux-fdisk \
#util-linux-mkfs \
#util-linux-mount \
#xrt \
#xrt-dev \
#zocl \
#bluez5 \
#connman-gtk \
#git \
#iw \
#libftdi \
#packagegroup-petalinux \
#packagegroup-petalinux-96boards-sensors \
#packagegroup-petalinux-benchmarks \
#packagegroup-petalinux-openamp \
#packagegroup-petalinux-ultra96-webapp \
#packagegroup-petalinux-utils \
#openamp-fw-echo-testd \
#openamp-fw-mat-muld \
#openamp-fw-rpc-demo \
#ultra96-ap-setup \
#ultra96-misc \
#ultra96-radio-leds \
#ultra96-wpa \
#usb-gadget-ethernet \
#wilc3000-fw \
#wilc \
#"


#--------------------------------------------------------------------------------------------------
EXTRA_FILESLIST:append = " /mnt/SW_1TB/u96/sources/configs/config:config"
#--------------------------------------------------------------------------------------------------
